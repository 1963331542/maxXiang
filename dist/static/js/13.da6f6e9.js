(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{ME0q:function(t,e,a){"use strict";a.r(e);var n=a("cLjf"),r=a.n(n),s=a("hDQ3"),c=a.n(s),i=a("bS4n"),o=a.n(i),u=a("WRrH"),f=a("Clp8"),l=a("jhdv"),h={name:"layout",computed:o()({},Object(u.d)({tagNav:function(t){return t.tagNav},staticData:function(t){return t.staticData},asyncData:function(t){return t.asyncData},user:function(t){return t.user}})),created:function(){},watch:{},beforeRouteEnter:function(t,e,a){a(function(t){t.init(t)})},methods:{init:function(t){var e=this;return c()(r.a.mark(function a(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.staticData.isLayoutReady=e.sent,t.$toast.loading({message:"加载中...",onClose:function(){t.staticData.isLayoutReady||t.init()}}),t.staticData.isLayoutReady&&t.$toast.clear();case 5:case"end":return e.stop()}},a,e)}))()},initData:function(){var t=this;return c()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.wxLogin();case 2:return e.next=4,t.getAllShopName();case 4:return e.next=6,t.getAllSex();case 6:return e.next=8,t.getSubCategorys();case 8:return a=(new Date).getFullYear()+"-"+Object(l.c)(Object(l.b)())[1].split("~")[0],t.$store.commit("staticData/setScreenParams",{importDate:a}),e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,t)}))()},wxLogin:function(){var t=this;return c()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.a.hasToken(),e.next=3,t.$store.dispatch("auth/wxLogin",a);case 3:case"end":return e.stop()}},e,t)}))()},getAllShopName:function(){var t=this;return c()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.Apis.home.getAllShopName().then(function(e){1==e.result&&t.$store.commit("asyncData/setDataByStateStr",{str:"shopList",data:e.data})},function(){t.getAllShopName()}).catch(function(){t.getAllShopName()});case 2:case"end":return e.stop()}},e,t)}))()},getAllSex:function(){var t=this;return c()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.Apis.home.getAllSex().then(function(e){1==e.result&&t.$store.commit("asyncData/setDataByStateStr",{str:"sexList",data:e.data})},function(){t.getAllSex()}).catch(function(){t.getAllSex()});case 2:case"end":return e.stop()}},e,t)}))()},getSubCategorys:function(){var t=this;return c()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.Apis.home.getSubCategorys().then(function(e){1==e.result&&t.$store.commit("asyncData/setDataByStateStr",{str:"categorys",data:e.data})},function(){t.getSubCategorys()}).catch(function(){t.getSubCategorys()});case 2:case"end":return e.stop()}},e,t)}))()}}},p=a("ZpG+"),g=Object(p.a)(h,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"msp_page"},[e("keep-alive",{attrs:{include:this.tagNav.keepAliveList}},[this.staticData.isLayoutReady?e("router-view"):this._e()],1),this._v(" "),this.staticData.isFooter?e("footer-bar",{attrs:{curModel:this.staticData.curModel}}):this._e()],1)},[],!1,null,null,null);e.default=g.exports}}]);