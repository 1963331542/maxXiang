(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{Hb8o:function(t,a,s){"use strict";s.r(a);var e=s("bS4n"),o=s.n(e),i=s("WRrH"),r={name:"shopDetail",computed:o()({},Object(i.d)({asyncData:function(t){return t.asyncData},staticData:function(t){return t.staticData},storageData:function(t){return t.storageData}})),data:function(){return{show:!1,body:[],lastScroll:2,returnTop:!1,thisScroll:0}},created:function(){this.storageData.clickShopData&&this.storageData.clickShopData.length||(this.$store.commit("staticData/setScreenParams",{shopNames:localStorage.clickShopName||"",pageNum:0}),this.getShopData(!0))},methods:o()({},Object(i.c)({setAllShopData:"storageData/setAllShopData"}),{getShopData:function(t){t&&(this.storageData.clickShopName,localStorage.clickShopName=this.staticData.screenParams.shopNames),this.$store.dispatch("asyncData/getShopGoodsList",t)},saveFilter:function(){this.getShopData(!0),this.rightClick()},rightClick:function(){this.staticData.isLayoutReady&&(this.show?this.show=!1:this.show=!0)},goGoodsDetail:function(t){var a=this,s={styleNo:t.styleNo,storeName:t.storeName};s.importDate=this.staticData.screenParams.importDate,this.$store.dispatch("asyncData/getShopGoodsDetail",s).then(function(t){a.$router.push("/goodsDetail")})},addSweepList:function(t){var a=this,s=t.storeName,e=t.styleNo;this.$toast.clear();var o={importDate:this.staticData.screenParams.importDate,storeName:s,styleNo:e};this.Apis.goods.addSweepList(o).then(function(t){1==t.result?a.$toast.success("添加成功"):a.$toast.fail("添加失败")})},follow:function(t,a){var s=this,e=void 0,o=t.styleNo,i=void 0;t.$checked?(t.$checked=!1,i="goodsDelFollow",e="取消关注"):(t.$checked=!0,i="goodsAddFollow",e="关注成功"),this.storageData.clickShopData.splice(a,1,t),this.Apis.goods[i]({styleNo:o}).then(function(t){"取消关注"==e&&s.storageData.clickShopData.splice(a,1),s.$toast.success(e)})},getStockDetail:function(t,a){var s=this,e=this.staticData.screenParams,o=e.importDate,i=e.week;if(t){var r={importDate:o,week:i};r.styleNo=a.styleNo,r.storeName=a.storeName,this.Apis.shop.getStockDetail(r).then(function(t){s.$store.commit("setDataByStateStr",{str:"storageData/clickGoodsStock",data:t.data})})}},loadMore:function(t){var a=t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight;if(a<=this.lastScroll){this.lastScroll=a;var s=1*this.staticData.screenParams.pageNum+1;this.$store.commit("staticData/setScreenParams",{pageNum:s}),this.getShopData()}t.target.scrollTop>=t.target.scrollHeight/4?(t.target.scrollTop<this.thisScroll?this.returnTop=!0:this.returnTop=!1,this.thisScroll=t.target.scrollTop):this.returnTop=!1},returnOfTop:function(){var t=this;console.log("return top click"),window.returnTopTimer=setInterval(function(){t.$refs.page_main_refs.scrollTop-=t.$refs.page_main_refs.scrollTop/30,t.$refs.page_main_refs.scrollTop<=0&&clearInterval(window.returnTopTimer)},10)}}),watch:{"staticData.isLookFollow":function(t,a){var s=this;t?this.$store.dispatch("asyncData/getFollowList").then(function(){s.getShopData(!0)}).catch(function(t){s.storageData.setClickShopData=[]}):(this.$store.commit("staticData/setScreenParams",{styleNos:""}),this.getShopData(!0))}},mounted:function(){}},c=(s("lENo"),s("ZpG+")),n=Object(c.a)(r,function(){var t=this,a=t.$createElement,s=t._self._c||a;return t.storageData.clickShopData?s("div",{ref:"screenBtn",staticClass:"msp_page"},[s("headBar",{attrs:{title:"门店 -- "+(t.storageData.clickShopName||"全部")}},[s("van-icon",{staticClass:"detail_header",attrs:{slot:"left",name:"shop-o"},on:{click:function(a){return t.$router.push("/shopQuery")}},slot:"left"}),t._v(" "),s("search-bar",{attrs:{show:t.show},on:{search:function(a){return t.getShopData(!0)}}}),t._v(" "),s("div",{staticClass:"iconfont icon-shaixuan1 detail_header",attrs:{slot:"right"},on:{click:function(a){return a.stopPropagation(),t.rightClick(a)}},slot:"right"})],1),t._v(" "),s("div",{ref:"page_main_refs",staticClass:"msp_page_main",on:{scroll:t.loadMore}},[s("screen",{attrs:{offset:function(){return t.$refs.screenBtn}},on:{save:t.saveFilter},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}}),t._v(" "),t._l(t.storageData.clickShopData,function(a,e){return s("van-row",{key:e},[s("van-col",{staticClass:"page_main_one",attrs:{span:"24"}},[s("van-card",[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.imgUrls,expression:"item.imgUrls"}],attrs:{slot:"thumb",alt:""},slot:"thumb"}),t._v(" "),s("div",{staticClass:"tagImg",attrs:{slot:"tag"},slot:"tag"},[s("div",{staticClass:"tagIcon"}),t._v(" "),s("div",{staticClass:"tagInfo"},[t._v("到")])]),t._v(" "),s("van-row",{staticClass:"row_div",attrs:{slot:"desc"},slot:"desc"},[s("van-col",{staticClass:"textHidden flexCenter",attrs:{span:"21"}},[s("div",[t._v(t._s("货号："+a.styleNo))]),t._v(" "),s("div",{staticClass:"red_tags"},[t._v(t._s(a.sex))])]),t._v(" "),s("van-col",{staticClass:"textHidden",attrs:{span:"3"}},[s("img",{staticClass:"icon_img",attrs:{src:a.$checked?a.starImg:a.star_Img},on:{click:function(s){return t.follow(a,e)}}})])],1),t._v(" "),s("van-row",{staticClass:"row_div",attrs:{slot:"desc"},slot:"desc"},[s("van-col",{staticClass:"textHidden",attrs:{span:"24"}},[t._v(t._s("店铺："+a.storeName))])],1),t._v(" "),s("van-row",{staticClass:"row_div",attrs:{slot:"desc"},slot:"desc"},[s("van-col",{staticClass:"textHidden",attrs:{span:"24"}},[t._v(t._s(a.buyerName))])],1),t._v(" "),s("van-row",{staticClass:"row_div",attrs:{slot:"desc"},slot:"desc"},[s("van-col",{staticClass:"textHidden",attrs:{span:"24"}},[t._v(t._s("到货："+a.arriveInterval))])],1),t._v(" "),s("van-row",{staticClass:"row_div",attrs:{slot:"desc"},slot:"desc"},[s("van-col",{staticClass:"textHidden",attrs:{span:"12"}},[t._v(t._s("在库数量："+a.onHand))]),t._v(" "),s("van-col",{staticClass:"textHidden",attrs:{span:"12"}},[t._v(t._s("到货数量："+a.arriveNum))])],1),t._v(" "),s("van-row",{staticClass:"row_div",attrs:{slot:"desc"},slot:"desc"},[s("van-col",{staticClass:"_price textHidden",attrs:{span:"24"}},[t._v("折扣价：￥"+t._s(a.newMkdString)+"／¥"+t._s(a.curPriceString))])],1),t._v(" "),s("van-row",{staticClass:"row_div",attrs:{slot:"desc"},slot:"desc"},[s("van-col",{staticClass:"origin_price textHidden",attrs:{span:"24"}},[t._v("吊牌价：￥"+t._s(a.msrpString))])],1),t._v(" "),s("van-row",{staticClass:"row_div colorWeak",attrs:{slot:"desc"},slot:"desc"},[s("van-col",{staticClass:"textHidden",attrs:{span:"24"}},[t._v(t._s(a.styleName))])],1),t._v(" "),s("van-row",{staticClass:"row_div",attrs:{slot:"tags"},slot:"tags"},[s("van-col",{staticClass:"textHidden tags_col",attrs:{span:"24"}},[s("div",{staticClass:"tags_div"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(a.categoryString)+"\n\t\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"tags_div"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(a.subCategory)+"\n\t\t\t\t\t\t\t")])])],1),t._v(" "),s("van-row",{staticClass:"row_red_div textHidden",attrs:{slot:"desc"},slot:"desc"},[t._v("\n\t\t\t\t\t\t"+t._s("折扣率："+a.discount)+"%\n\t\t\t\t\t")]),t._v(" "),s("van-row",{staticClass:"row_div",attrs:{slot:"tags"},slot:"tags"},[s("van-col",{staticClass:"tags_col menu_list",attrs:{span:"24"}},[s("div",{staticClass:"menu_blueColor",on:{click:function(s){return t.goGoodsDetail(a)}}},[t._v("进入详情")]),t._v(" "),s("div",{staticClass:"menu_blueColor",on:{click:function(s){return t.addSweepList(a)}}},[t._v("加入扫货单")])])],1)],1),t._v(" "),s("van-collapse",{attrs:{accordion:""},on:{change:function(s){return t.getStockDetail(s,a)}},model:{value:t.storageData.collapseModel[e].model,callback:function(a){t.$set(t.storageData.collapseModel[e],"model",a)},expression:"storageData['collapseModel'][index]['model']"}},[s("van-collapse-item",{attrs:{size:"large",name:t.storageData.collapseModel[e].name,title:"尺码详情"}},[s("div",{staticClass:"msg_size_list"},[s("van-row",t._l(t.staticData.sizeDetailHead,function(a,e){return s("van-col",{key:e,staticClass:"textC border_list list_head",attrs:{span:"6"}},[t._v(t._s(a))])}),1),t._v(" "),t._l(t.storageData.clickGoodsStock,function(a,e){return s("van-row",{directives:[{name:"lazy",rawName:"v-lazy",value:a,expression:"items"}],key:e},[s("van-col",{staticClass:"textC border_list",attrs:{span:"6"}},[t._v(t._s(a.size))]),t._v(" "),s("van-col",{staticClass:"textC border_list",attrs:{span:"6"}},[t._v(t._s(a.onHand))]),t._v(" "),s("van-col",{staticClass:"textC border_list",attrs:{span:"6"}},[t._v(t._s(a.arriveNum))]),t._v(" "),s("van-col",{staticClass:"textC border_list",attrs:{span:"6"}},[t._v(t._s(a.onHand>0?a.arriveDate?"在库/"+a.arriveDate:"在库":a.arriveDate))])],1)})],2)])],1)],1)],1)}),t._v(" "),t.storageData.clickShopData.length?t._e():s("div",{staticClass:"noGoodsMsg"},[t._v("\n\t\t\t--------我是有底线的--------\n\t\t")])],2),t._v(" "),s("div",{staticClass:"rightPopup",on:{click:t.returnOfTop}},[s("van-popup",{attrs:{position:"right",overlay:!1},model:{value:t.returnTop,callback:function(a){t.returnTop=a},expression:"returnTop"}},[s("van-icon",{attrs:{name:"arrow-up",size:"20px"}}),t._v(" "),s("div",[t._v("返回")]),t._v(" "),s("div",[t._v("顶部")])],1)],1)],1):t._e()},[],!1,null,"beab8924",null);a.default=n.exports},LQB6:function(t,a,s){},lENo:function(t,a,s){"use strict";var e=s("LQB6");s.n(e).a}}]);